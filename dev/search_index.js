var documenterSearchIndex = {"docs":
[{"location":"#Wavefronts.jl-documentation-1","page":"Wavefronts.jl documentation","title":"Wavefronts.jl documentation","text":"","category":"section"},{"location":"#","page":"Wavefronts.jl documentation","title":"Wavefronts.jl documentation","text":"","category":"page"},{"location":"#Functions-1","page":"Wavefronts.jl documentation","title":"Functions","text":"","category":"section"},{"location":"#","page":"Wavefronts.jl documentation","title":"Wavefronts.jl documentation","text":"retrievephase\nrawphase\nunwrapphase\ncorrect\nproject\nintensity\nfield\nphase\namplitude\ncirc","category":"page"},{"location":"#Wavefronts.retrievephase","page":"Wavefronts.jl documentation","title":"Wavefronts.retrievephase","text":"retrievephase(intensity0, intensity1, intensity2[, intensity3]; correct_aberrations, mask)\n\nBasically compose rawphase and unwrapphase. If correct_aberrations is given, tries to correct the given aberrations with the given mask.\n\nSee also: rawphase, unwrapphase, correct\n\n\n\n\n\n","category":"function"},{"location":"#Wavefronts.rawphase","page":"Wavefronts.jl documentation","title":"Wavefronts.rawphase","text":"rawphase(intensity0, intensity1, intensity2, intensity3)\n\nCompute the raw phase from four intensity of interference pattern. The reference in the pattern of intensity intensityi is assumed to be shifted of i×π/2.\n\nSee also: unwrapphase, retrievephase\n\n\n\n\n\nrawphase(intensity0, intensity1, intensity2)\n\nCompute the raw phase from four intensity of interference pattern. The reference in the pattern of intensity intensityi is assumed to be shifted of i×π/3.\n\nSee also: unwrapphase, retrievephase\n\n\n\n\n\n","category":"function"},{"location":"#Wavefronts.unwrapphase","page":"Wavefronts.jl documentation","title":"Wavefronts.unwrapphase","text":"unwrapphase(wrappedphase)\n\nUnwrap the phase. The method used is inspired by the Standard Experiment Laboratory script from the MSc in Optics and Photonics at Imperial College London. The input is typically the output of rawphase.\n\nSee also: rawphase, retrievephase\n\n\n\n\n\n","category":"function"},{"location":"#Wavefronts.correct","page":"Wavefronts.jl documentation","title":"Wavefronts.correct","text":"correct(aberration, data; mask=(x,y)->1)\n\nCorrect the given aberration in the data by projecting the data on the aberration.\n\nSee also: project\n\n\n\n\n\n","category":"function"},{"location":"#Wavefronts.project","page":"Wavefronts.jl documentation","title":"Wavefronts.project","text":"project(aberration, data; mask=(x,y)->1)\n\nProject the data onto the Zernike polynomial corresponding to the aberration in order to get the fitting Aberration. A mask can be used to fit only in certain parts of the data (typically usefull if your interference pattern is only relevant in a circular region). The coordinates are assumed to be normalized such that (x,y) ∈ [-1;1]².\n\nSee also: correct\n\n\n\n\n\n","category":"function"},{"location":"#Wavefronts.intensity","page":"Wavefronts.jl documentation","title":"Wavefronts.intensity","text":"intensity(aberration, coordinates=:cartesian; mask=(x,y)->1)\n\nCreates a function mapping the intensity in the given coordinates system (:cartesian or :polar). This is equivalent of building two Wavefront, one with no aberration and the other with the given aberration.\n\nSee also: phase, amplitude\n\n\n\n\n\nintensity(wavefront)\n\nCreate a function mapping the intensity in the coordinates of the wavefront.\n\nSee also: field, amplitude, phase\n\n\n\n\n\nintensity(wavefront, reference)\n\nCreate a function mapping the intensity of the interference pattern of the wavefront with the reference. Both should be in the same coordinate system.\n\nSee also: field, amplitude, phase\n\n\n\n\n\n","category":"function"},{"location":"#Wavefronts.field","page":"Wavefronts.jl documentation","title":"Wavefronts.field","text":"field(wavefront)\n\nCreate a function mapping the field in the coordinates of the wavefront.\n\nSee also: intensity, amplitude, phase\n\n\n\n\n\n","category":"function"},{"location":"#Wavefronts.phase","page":"Wavefronts.jl documentation","title":"Wavefronts.phase","text":"phase(aberration, coordinates=:cartesian)\n\nCreate a function mapping the phase of the aberration in the given coordinates system (:cartesian or :polar).\n\nSee also: intensity, amplitude\n\n\n\n\n\nphase(wavefront)\n\nCreate a function mapping the phase of the wavefront.\n\nSee also: intensity, amplitude, field\n\n\n\n\n\n","category":"function"},{"location":"#Wavefronts.amplitude","page":"Wavefronts.jl documentation","title":"Wavefronts.amplitude","text":"amplitude(wavefront)\n\nCreate a function mapping the amplitude of the wavefront.\n\nSee also: intensity, field, phase\n\n\n\n\n\n","category":"function"},{"location":"#Wavefronts.circ","page":"Wavefronts.jl documentation","title":"Wavefronts.circ","text":"circ(x,y)\n\nCircular mask of radius 1.\n\n\n\n\n\n","category":"function"},{"location":"#Types-1","page":"Wavefronts.jl documentation","title":"Types","text":"","category":"section"},{"location":"#Aberrations-1","page":"Wavefronts.jl documentation","title":"Aberrations","text":"","category":"section"},{"location":"#","page":"Wavefronts.jl documentation","title":"Wavefronts.jl documentation","text":"Aberration\nPiston\nTilt\nTip\nDefocus\nObliqueAstigmatism\nVerticalAstigmatism\nHorizontalComa\nVerticalComa\nObliqueTrefoil\nVerticalTrefoil\nSpherical\nAddAberration\nAstigmatism\nComa\nTrefoil","category":"page"},{"location":"#Wavefronts.Aberration","page":"Wavefronts.jl documentation","title":"Wavefronts.Aberration","text":"Represents an aberration. This uses Zernike polynomials.\n\nSee also: Piston, Tilt, Tip, Defocus, ObliqueAstigmatism, VerticalAstigmatism, HorizontalComa, VerticalComa, ObliqueTrefoil, VerticalTrefoil, Spherical, AddAberration, Astigmatism, Coma, Trefoil\n\n\n\n\n\n","category":"type"},{"location":"#Wavefronts.Piston","page":"Wavefronts.jl documentation","title":"Wavefronts.Piston","text":"Piston aberration.\n\n\n\n\n\n","category":"type"},{"location":"#Wavefronts.Tilt","page":"Wavefronts.jl documentation","title":"Wavefronts.Tilt","text":"Tilt aberration.\n\n\n\n\n\n","category":"type"},{"location":"#Wavefronts.Tip","page":"Wavefronts.jl documentation","title":"Wavefronts.Tip","text":"Tip aberration.\n\n\n\n\n\n","category":"type"},{"location":"#Wavefronts.Defocus","page":"Wavefronts.jl documentation","title":"Wavefronts.Defocus","text":"Defocus aberration.\n\n\n\n\n\n","category":"type"},{"location":"#Wavefronts.ObliqueAstigmatism","page":"Wavefronts.jl documentation","title":"Wavefronts.ObliqueAstigmatism","text":"ObliqueAstigmatism aberration.\n\n\n\n\n\n","category":"type"},{"location":"#Wavefronts.VerticalAstigmatism","page":"Wavefronts.jl documentation","title":"Wavefronts.VerticalAstigmatism","text":"VerticalAstigmatism aberration.\n\n\n\n\n\n","category":"type"},{"location":"#Wavefronts.HorizontalComa","page":"Wavefronts.jl documentation","title":"Wavefronts.HorizontalComa","text":"HorizontalComa aberration.\n\n\n\n\n\n","category":"type"},{"location":"#Wavefronts.VerticalComa","page":"Wavefronts.jl documentation","title":"Wavefronts.VerticalComa","text":"VerticalComa aberration.\n\n\n\n\n\n","category":"type"},{"location":"#Wavefronts.ObliqueTrefoil","page":"Wavefronts.jl documentation","title":"Wavefronts.ObliqueTrefoil","text":"ObliqueTrefoil aberration.\n\n\n\n\n\n","category":"type"},{"location":"#Wavefronts.VerticalTrefoil","page":"Wavefronts.jl documentation","title":"Wavefronts.VerticalTrefoil","text":"VerticalTrefoil aberration.\n\n\n\n\n\n","category":"type"},{"location":"#Wavefronts.Spherical","page":"Wavefronts.jl documentation","title":"Wavefronts.Spherical","text":"Spherical aberration.\n\n\n\n\n\n","category":"type"},{"location":"#Wavefronts.AddAberration","page":"Wavefronts.jl documentation","title":"Wavefronts.AddAberration","text":"The addition of two aberrations. It is created when + operator is used on two Aberration.\n\n\n\n\n\n","category":"type"},{"location":"#Wavefronts.Astigmatism","page":"Wavefronts.jl documentation","title":"Wavefronts.Astigmatism","text":"Astigmatism aberration.\n\n\n\n\n\n","category":"type"},{"location":"#Wavefronts.Coma","page":"Wavefronts.jl documentation","title":"Wavefronts.Coma","text":"Coma aberration.\n\n\n\n\n\n","category":"type"},{"location":"#Wavefronts.Trefoil","page":"Wavefronts.jl documentation","title":"Wavefronts.Trefoil","text":"Trefoil aberration.\n\n\n\n\n\n","category":"type"},{"location":"#Wavefronts-1","page":"Wavefronts.jl documentation","title":"Wavefronts","text":"","category":"section"},{"location":"#","page":"Wavefronts.jl documentation","title":"Wavefronts.jl documentation","text":"Wavefront\nAddWavefront","category":"page"},{"location":"#Wavefronts.Wavefront","page":"Wavefronts.jl documentation","title":"Wavefronts.Wavefront","text":"Represents a wavefront.\n\n\n\n\n\n","category":"type"},{"location":"#Wavefronts.AddWavefront","page":"Wavefronts.jl documentation","title":"Wavefronts.AddWavefront","text":"Represents the addition of a two wavefronts. It is created when + operator is used on two Wavefront.\n\n\n\n\n\n","category":"type"},{"location":"#Index-1","page":"Wavefronts.jl documentation","title":"Index","text":"","category":"section"},{"location":"#","page":"Wavefronts.jl documentation","title":"Wavefronts.jl documentation","text":"","category":"page"},{"location":"example/#Example-of-using-Wavefronts.jl-1","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"","category":"section"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"using Plots\nusing Wavefronts","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"┌ Info: Recompiling stale cache file /home/klafyvel/.julia/compiled/v1.2/Wavefronts/NyKHD.ji for Wavefronts [5a5f1f2e-54ce-422a-b05d-abd9e7c2d134]\n└ @ Base loading.jl:1240","category":"page"},{"location":"example/#Making-interference-patterns-1","page":"Example of using Wavefronts.jl","title":"Making interference patterns","text":"","category":"section"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"Let's model a phase stepping interferometer. We need four patterns with a reference shifted by π/2 every time.","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"x = -1:0.001:1\ny = -1:0.001:1\nX = repeat(reshape(x, 1, :), length(y), 1)\nY = repeat(y, 1, length(x))\nevaluate_intensity(f) = map(f, X, Y)\na = Wavefront(\n    Tilt(10)+Coma(10,20)+Spherical(10)+Defocus(10),\n    circ\n)\npatterns = [\n    map(intensity(a, Wavefront(Tip(30)+Piston(i*π/2), circ)), X, Y)\n    for i in 0:3\n];","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"The patterns are like this","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"heatmap(x,y,patterns[1],aspect_ratio=1,title=\"Interference patterns\")","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"(Image: svg)","category":"page"},{"location":"example/#Retrieving-the-phase-step-by-step-1","page":"Example of using Wavefronts.jl","title":"Retrieving the phase step by step","text":"","category":"section"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"Let's retrieve the raw phase","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"raw = rawphase(patterns...)\nheatmap(x,y,raw, aspect_ratio=1, title=\"Raw phase\")","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"(Image: svg)","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"unwrapped = unwrapphase(raw)\nheatmap(x,y,unwrapped, aspect_ratio=1, title=\"Unwrapped phase\")","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"(Image: svg)","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"The reference was tilted, let's remove it by hand (there is also a function which does it for you).","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"ref_ϕ = phase(Wavefront(Tip(30)))","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"#1 (generic function with 1 method)","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"ref_ϕ_values = ref_ϕ.(X,Y)\ncalc_phase = unwrapped + ref_ϕ_values\nheatmap(x,y,calc_phase, aspect_ratio=1, title=\"Unwrapped phase, reference removed\")","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"(Image: svg)","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"original_values = phase(a).(X,Y)\ndiff = abs.(original_values - calc_phase)\nheatmap(x,y,diff, aspect_ratio=1, title=\"Difference between original phase and calculated phase\")","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"(Image: svg)","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"It is expected that the border presents weird behaviour. We can ignore that.","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"diff .*= circ.(X,Y)\nheatmap(x,y,diff, aspect_ratio=1, title=\"Difference between original phase and retrieved phase, \\nborder removed.\")","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"(Image: svg)","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"We can calculate the RMS of the difference","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"rms = sqrt(sum(diff.^2) / sum(circ.(X,Y)))","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"6.2831853071795845","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"weird, it looks like the phase shift is constant","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"2π - rms","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"1.7763568394002505e-15","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"Yeah, so obviously it's only an ambiguity over 2π, which makes sens. We can re-evaluate the RMS knowing that","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"diff = circ.(X,Y) .* (diff.-2π)\nrms = sqrt(sum(diff.^2) / sum(circ.(X,Y)))","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"4.1568208770299665e-15","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"Better :D","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"heatmap(x,y,diff, aspect_ratio=1, title=\"Difference between original phase and retrieved phase, \\nborder and 2pi ambiguity removed.\")","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"(Image: svg)","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"Okay, let's try to find the aberrations in this.","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"project(Tilt, calc_phase, mask=circ)","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"Tilt(9.998483428521132)","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"Coool :D, as a reminder, the original aberration was","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"Tilt(10)+Coma(10,20)+Spherical(10)+Defocus(10)","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"Wavefronts.AddAberration(Wavefronts.AddAberration(Wavefronts.AddAberration(Tilt(10), Coma(Wavefronts.HorizontalComa(10), Wavefronts.VerticalComa(20))), Spherical(10)), Defocus(10))","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"Let's find other aberrations !","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"project(Tip, calc_phase, mask=circ)","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"Tip(-0.0006443144242641213)","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"project(Coma, calc_phase, mask=circ)","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"Coma(Wavefronts.HorizontalComa(9.999317746440996), Wavefronts.VerticalComa(19.997991178457728))","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"project(Piston, calc_phase, mask=circ)","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"Piston(-6.284089170735127)","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"Oh, here is our 2pi error again !","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"project(Defocus, calc_phase, mask=circ)","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"Defocus(9.9989115973913)","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"project(Astigmatism, calc_phase, mask=circ)","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"Astigmatism(Wavefronts.ObliqueAstigmatism(-8.893678329211982e-16), Wavefronts.VerticalAstigmatism(-5.929118886141322e-16))","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"project(Trefoil, calc_phase, mask=circ)","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"Trefoil(Wavefronts.ObliqueTrefoil(-0.001149438351092385), Wavefronts.VerticalTrefoil(0.0031118694231453787))","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"project(Spherical, calc_phase, mask=circ)","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"Spherical(9.998530646137448)","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"We can even correct some aberrations !","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"corrected = correct(Tilt, calc_phase,mask=circ)\nheatmap(x,y,corrected, aspect_ratio=1, title=\"Calculated phase corrected of tilt\")","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"(Image: svg)","category":"page"},{"location":"example/#Automated-method-1","page":"Example of using Wavefronts.jl","title":"Automated method","text":"","category":"section"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"Of course, in real life you don't want to do all these steps by yourself and it's perfectly fine because Wavefronts.jl does them for you. :)","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"calc_phase = retrievephase(patterns...; mask=circ, correct_aberrations=[Tilt, Tip, Piston, Defocus])\nheatmap(x,y,calc_phase, aspect_ratio=1, title=\"Calculated phase corrected of tilt, tip, piston and defocus\")","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"(Image: svg)","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"Our calculated phase still have the interesting aberrations (coma and spherical) while the others have been removed. As a reminder the original aberrations were Tilt(10)+Coma(10,20)+Spherical(10)+Defocus(10).","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"project(Tilt, calc_phase, mask=circ), project(Coma, calc_phase, mask=circ), \nproject(Spherical, calc_phase, mask=circ), project(Defocus, calc_phase, mask=circ)","category":"page"},{"location":"example/#","page":"Example of using Wavefronts.jl","title":"Example of using Wavefronts.jl","text":"(Tilt(0.00022790806120813725), Coma(Wavefronts.HorizontalComa(9.999317748986906), Wavefronts.VerticalComa(19.998635395167106)), Spherical(9.99909178844765), Defocus(0.0004552520838158169))","category":"page"}]
}
